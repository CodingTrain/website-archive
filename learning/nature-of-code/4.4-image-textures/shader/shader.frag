// Particle Systems with Image Textures (Shader (WEBGL))
// The Nature of Code
// The Coding Train / Daniel Shiffman / Dusk
// https://youtu.be/pUhv2CA0omA
// https://thecodingtrain.com/learning/nature-of-code/4.4-image-textures.html

// Texture Maker: https://editor.p5js.org/codingtrain/sketches/NS4rB1Yx-
// Image Texture: https://editor.p5js.org/codingtrain/sketches/TTVoNt58T
// Shader (WEBGL): https://editor.p5js.org/codingtrain/sketches/EXZmcc4m_

precision mediump float;
varying vec2 vTexCoord;

uniform float aspectRatio;

uniform vec3 particle0;
uniform vec3 particle1;
uniform vec3 particle2;
uniform vec3 particle3;
uniform vec3 particle4;
uniform vec3 particle5;
uniform vec3 particle6;
uniform vec3 particle7;
uniform vec3 particle8;
uniform vec3 particle9;
uniform vec3 particle10;
uniform vec3 particle11;
uniform vec3 particle12;
uniform vec3 particle13;
uniform vec3 particle14;
uniform vec3 particle15;
uniform vec3 particle16;
uniform vec3 particle17;
uniform vec3 particle18;
uniform vec3 particle19;
uniform vec3 particle20;
uniform vec3 particle21;
uniform vec3 particle22;
uniform vec3 particle23;
uniform vec3 particle24;
uniform vec3 particle25;
uniform vec3 particle26;
uniform vec3 particle27;
uniform vec3 particle28;
uniform vec3 particle29;
uniform vec3 particle30;
uniform vec3 particle31;
uniform vec3 particle32;
uniform vec3 particle33;
uniform vec3 particle34;
uniform vec3 particle35;
uniform vec3 particle36;
uniform vec3 particle37;
uniform vec3 particle38;
uniform vec3 particle39;
uniform vec3 particle40;
uniform vec3 particle41;
uniform vec3 particle42;
uniform vec3 particle43;
uniform vec3 particle44;
uniform vec3 particle45;
uniform vec3 particle46;
uniform vec3 particle47;
uniform vec3 particle48;
uniform vec3 particle49;
uniform vec3 particle50;
uniform vec3 particle51;
uniform vec3 particle52;
uniform vec3 particle53;
uniform vec3 particle54;
uniform vec3 particle55;
uniform vec3 particle56;
uniform vec3 particle57;
uniform vec3 particle58;
uniform vec3 particle59;
uniform vec3 particle60;
uniform vec3 particle61;
uniform vec3 particle62;
uniform vec3 particle63;
uniform vec3 particle64;
uniform vec3 particle65;
uniform vec3 particle66;
uniform vec3 particle67;
uniform vec3 particle68;
uniform vec3 particle69;
uniform vec3 particle70;
uniform vec3 particle71;
uniform vec3 particle72;
uniform vec3 particle73;
uniform vec3 particle74;
uniform vec3 particle75;
uniform vec3 particle76;
uniform vec3 particle77;
uniform vec3 particle78;
uniform vec3 particle79;
uniform vec3 particle80;
uniform vec3 particle81;
uniform vec3 particle82;
uniform vec3 particle83;
uniform vec3 particle84;
uniform vec3 particle85;
uniform vec3 particle86;
uniform vec3 particle87;
uniform vec3 particle88;
uniform vec3 particle89;
uniform vec3 particle90;
uniform vec3 particle91;
uniform vec3 particle92;
uniform vec3 particle93;
uniform vec3 particle94;
uniform vec3 particle95;
uniform vec3 particle96;
uniform vec3 particle97;
uniform vec3 particle98;
uniform vec3 particle99;
uniform vec3 particle100;
uniform vec3 particle101;
uniform vec3 particle102;
uniform vec3 particle103;
uniform vec3 particle104;
uniform vec3 particle105;
uniform vec3 particle106;
uniform vec3 particle107;
uniform vec3 particle108;
uniform vec3 particle109;
uniform vec3 particle110;
uniform vec3 particle111;
uniform vec3 particle112;
uniform vec3 particle113;
uniform vec3 particle114;
uniform vec3 particle115;
uniform vec3 particle116;
uniform vec3 particle117;
uniform vec3 particle118;
uniform vec3 particle119;
uniform vec3 particle120;
uniform vec3 particle121;
uniform vec3 particle122;
uniform vec3 particle123;
uniform vec3 particle124;
uniform vec3 particle125;
uniform vec3 particle126;
uniform vec3 particle127;
uniform vec3 particle128;
uniform vec3 particle129;
uniform vec3 particle130;
uniform vec3 particle131;
uniform vec3 particle132;
uniform vec3 particle133;
uniform vec3 particle134;
uniform vec3 particle135;
uniform vec3 particle136;
uniform vec3 particle137;
uniform vec3 particle138;
uniform vec3 particle139;
uniform vec3 particle140;
uniform vec3 particle141;
uniform vec3 particle142;
uniform vec3 particle143;
uniform vec3 particle144;
uniform vec3 particle145;
uniform vec3 particle146;
uniform vec3 particle147;
uniform vec3 particle148;
uniform vec3 particle149;
uniform vec3 particle150;
uniform vec3 particle151;
uniform vec3 particle152;


float circle(in vec2 _st, in float _radius){
  vec2 dist = _st-vec2(1.0);
  return 1.-smoothstep(0.0, _radius,
                         dot(dist,dist)*4.0);
}

void main() {
  vec2 coord = vTexCoord;
  
  vec3 particles[255];
  particles[0] = particle0;
  particles[1] = particle1;
  particles[2] = particle2;
  particles[3] = particle3;
  particles[4] = particle4;
  particles[5] = particle5;
  particles[6] = particle6;
  particles[7] = particle7;
  particles[8] = particle8;
  particles[9] = particle9;
  particles[10] = particle10;
  particles[11] = particle11;
  particles[12] = particle12;
  particles[13] = particle13;
  particles[14] = particle14;
  particles[15] = particle15;
  particles[16] = particle16;
  particles[17] = particle17;
  particles[18] = particle18;
  particles[19] = particle19;
  particles[20] = particle20;
  particles[21] = particle21;
  particles[22] = particle22;
  particles[23] = particle23;
  particles[24] = particle24;
  particles[25] = particle25;
  particles[26] = particle26;
  particles[27] = particle27;
  particles[28] = particle28;
  particles[29] = particle29;
  particles[30] = particle30;
  particles[31] = particle31;
  particles[32] = particle32;
  particles[33] = particle33;
  particles[34] = particle34;
  particles[35] = particle35;
  particles[36] = particle36;
  particles[37] = particle37;
  particles[38] = particle38;
  particles[39] = particle39;
  particles[40] = particle40;
  particles[41] = particle41;
  particles[42] = particle42;
  particles[43] = particle43;
  particles[44] = particle44;
  particles[45] = particle45;
  particles[46] = particle46;
  particles[47] = particle47;
  particles[48] = particle48;
  particles[49] = particle49;
  particles[50] = particle50;
  particles[51] = particle51;
  particles[52] = particle52;
  particles[53] = particle53;
  particles[54] = particle54;
  particles[55] = particle55;
  particles[56] = particle56;
  particles[57] = particle57;
  particles[58] = particle58;
  particles[59] = particle59;
  particles[60] = particle60;
  particles[61] = particle61;
  particles[62] = particle62;
  particles[63] = particle63;
  particles[64] = particle64;
  particles[65] = particle65;
  particles[66] = particle66;
  particles[67] = particle67;
  particles[68] = particle68;
  particles[69] = particle69;
  particles[70] = particle70;
  particles[71] = particle71;
  particles[72] = particle72;
  particles[73] = particle73;
  particles[74] = particle74;
  particles[75] = particle75;
  particles[76] = particle76;
  particles[77] = particle77;
  particles[78] = particle78;
  particles[79] = particle79;
  particles[80] = particle80;
  particles[81] = particle81;
  particles[82] = particle82;
  particles[83] = particle83;
  particles[84] = particle84;
  particles[85] = particle85;
  particles[86] = particle86;
  particles[87] = particle87;
  particles[88] = particle88;
  particles[89] = particle89;
  particles[90] = particle90;
  particles[91] = particle91;
  particles[92] = particle92;
  particles[93] = particle93;
  particles[94] = particle94;
  particles[95] = particle95;
  particles[96] = particle96;
  particles[97] = particle97;
  particles[98] = particle98;
  particles[99] = particle99;
  particles[100] = particle100;
  particles[101] = particle101;
  particles[102] = particle102;
  particles[103] = particle103;
  particles[104] = particle104;
  particles[105] = particle105;
  particles[106] = particle106;
  particles[107] = particle107;
  particles[108] = particle108;
  particles[109] = particle109;
  particles[110] = particle110;
  particles[111] = particle111;
  particles[112] = particle112;
  particles[113] = particle113;
  particles[114] = particle114;
  particles[115] = particle115;
  particles[116] = particle116;
  particles[117] = particle117;
  particles[118] = particle118;
  particles[119] = particle119;
  particles[120] = particle120;
  particles[121] = particle121;
  particles[122] = particle122;
  particles[123] = particle123;
  particles[124] = particle124;
  particles[125] = particle125;
  particles[126] = particle126;
  particles[127] = particle127;
  particles[128] = particle128;
  particles[129] = particle129;
  particles[130] = particle130;
  particles[131] = particle131;
  particles[132] = particle132;
  particles[133] = particle133;
  particles[134] = particle134;
  particles[135] = particle135;
  particles[136] = particle136;
  particles[137] = particle137;
  particles[138] = particle138;
  particles[139] = particle139;
  particles[140] = particle140;
  particles[141] = particle141;
  particles[142] = particle142;
  particles[143] = particle143;
  particles[144] = particle144;
  particles[145] = particle145;
  particles[146] = particle146;
  particles[147] = particle147;
  particles[148] = particle148;
  particles[149] = particle149;
  particles[150] = particle150;
  particles[151] = particle151;
  particles[152] = particle152;
  
  vec3 color = vec3(0.0);
  
  for (int i = 0; i < 255; i++) {
    vec2 pos = vec2(particles[i].x, particles[i].y);
    float brightness = particles[i].z;
    vec3 part = vec3(circle(coord + pos, 0.01));
    part *= vec3(0.59, 0.16, 0.31);
    part *= vec3(brightness);
    color += part;
  }
  
  gl_FragColor = vec4(color, 1.0);
}
